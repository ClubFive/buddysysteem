<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Buddybot</title>
 
<style>

/* #ipadContainer {
	
} */

#videoElement {
	position: absolute;
	left: 78px;
	top: 15px;
	width: 520px;
	height: 424px;
	background-color: black;
	/* border: 1px solid red; */
}

#ipad {
	/* width: 1224px;
	height: 968px; */
}

#mediaButtons {
	position: absolute;
	background: white;
	border: 1px solid red;
	height: 20px;
	display: flex;
	left: 440px;
	top: 390px;
	z-index: 1;
}

#mediaButtons > div {
	margin-right: 10px;
}

</style>
</head>
 
<body>

<div id="ipadContainer">
	<div id="mediaButtons">
		<div id="toggleWebcam">Webcam</div>
		<div id="toggleMicrophone">Microfoon</div>
	</div>
	<img id="ipad" src="ipad.png">
	<video autoplay="true" id="videoElement">
</div>
	
</video>
<script type="text/javascript">

    const video = document.querySelector('#videoElement');
	let notRecording = true;
	let notListening = true;

	document.getElementById('toggleWebcam').addEventListener('click', function() {

		if (notRecording) {
			notRecording = false;
			startRecording(video)
		} else {
			notRecording = true;
			stopRecording(video)
		}

		console.log('Webcam toggled');
	})

	document.getElementById('toggleMicrophone').addEventListener('click', function() {
		//
	})

	function startRecording(video) {
		window.navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            video.onloadedmetadata = (e) => {
                video.play();
            };
        });
	}

	function stopRecording(videoElement) {
		const stream = videoElement.srcObject;
		const tracks = stream.getTracks();

		tracks.forEach(function(track) {
			track.stop();
		});

		videoElement.srcObject = null;
	}

</script>
</body>
</html>